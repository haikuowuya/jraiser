/*!
 * JRaiser 2 Javascript Library
 * draggable - v1.0.0 (2013-11-23T10:58:26+0800)
 * http://jraiser.org/ | Released under MIT license
 */
define("draggable/1.0.x/",["widget/1.0.x/","dom/1.0.x/",null],function(t){"use strict";var e,o,r,i=t("base/1.0.x/"),n=t("widget/1.0.x/"),a=t("dom/1.0.x/"),l=a(window),s=a(document);return"ontouchstart"in document?(e="touchstart",o="touchend",r="touchmove"):(e="mousedown",o="mouseup",r="mousemove"),n.create(function(t){var e=this;e._wrapper=t.wrapper,e._dragTrigger=e._wrapper.find(".draggable-trigger"),e._dragTrigger.length||(e._dragTrigger=e._wrapper)},{_init:function(){var t=this;t.drag=function(e){var o=t._startPos;if(o&&null!=e.pageX&&null!=e.pageY){var r={left:e.pageX-o.left,top:e.pageY-o.top};t._isFixedPosition&&(r.left-=a(window).scrollLeft(),r.top-=a(window).scrollTop());var n=t._boundary;if(n){var l,s,d=t._wrapperSize;t._isFixedPosition?l=i.extend({},r):(l=t._wrapper.offset(),l.left+=r.left-t._oldPos.left,l.top+=r.top-t._oldPos.top,s=t._wrapper.offsetParent().offset()),l.right=l.left+d.width,l.bottom=l.top+d.height,s=s||{top:0,left:0},null!=n.right&&l.right>n.right&&(r.left=n.right-d.width-s.left),null!=n.left&&l.left<n.left&&(r.left=n.left-s.left),null!=n.bottom&&l.bottom>n.bottom&&(r.top=n.bottom-d.height-s.top),null!=n.top&&l.top<n.top&&(r.top=n.top-s.top)}t._wrapper.css(r),t._oldPos=r,t.trigger("drag",i.mix({position:r},e,{overwrite:!1}))}},t.end=function(e){t._startPos&&null!=e.pageX&&null!=e.pageY&&(t._wrapper.each(function(t){t.releaseCapture&&t.releaseCapture()}),s.off(r,t.drag),o&&s.off(o,t.end),l.off("blur",t.end),delete t._startPos,delete t._oldPos,delete t._wrapperSize,delete t._boundary,delete t._isFixedPosition,t.trigger("dragend",e))},t.start=function(e){if(!t._startPos&&null!=e.pageX&&null!=e.pageY&&!t.trigger("dragstart",e).isDefaultPrevented()){e.preventDefault();var i=t._wrapper,n=i.position(),a=i.css("position");"fixed"!==a&&"absolute"!==a&&(a="absolute",i.css("position",a)),t._isFixedPosition="fixed"===a,t._startPos={left:e.pageX-n.left,top:e.pageY-n.top},t._oldPos=n;var d=t._options.boundary;if(d){if("window"===d){var p=document.documentElement;t._boundary=t._isFixedPosition?{left:0,top:0,right:p.clientWidth,bottom:p.clientHeight}:{left:0,top:0,right:Math.max(p.scrollWidth,p.clientWidth),bottom:Math.max(p.scrollHeight,p.clientHeight)}}else if("parent"!==d||t._isFixedPosition)"function"==typeof d.offset?(t._boundary=d.offset(),t._boundary.right=t._boundary.left+d.innerWidth(),t._boundary.bottom=t._boundary.top+d.innerHeight()):t._boundary=d;else{var f=t._wrapper.offsetParent();f.length&&(t._boundary={left:f.offset().left,right:f.offset().left+f.innerWidth(),top:f.offset().top,bottom:f.offset().top+f.innerHeight()})}t._wrapperSize={width:t._wrapper.outerWidth(),height:t._wrapper.outerHeight()}}i.each(function(t){t.setCapture&&t.setCapture()}),s.on(r,t.drag),o&&s.on(o,t.end),l.on("blur",t.end)}},t._dragTrigger.on(e,t.start)},_destroy:function(){var t=this;t._startPos&&t.end(),t._dragTrigger.off(e,t.start),delete t.drag,delete t.end,delete t.start}})});