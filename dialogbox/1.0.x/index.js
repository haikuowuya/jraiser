/*!
 * JRaiser 2 Javascript Library
 * dialogbox - v1.0.0 (2013-10-01T22:51:57+0800)
 * http://jraiser.org/ | Released under MIT license
 */
define("dialogbox/1.0.x/",["widget/1.0.x/","popuplayer/1.0.x/","fixedlayer/1.0.x/","underscore/1.4.x/","dom/1.0.x/","draggable/1.0.x/",null],function(e){"use strict";function t(e,t,i){var r=document.documentElement,p="top"===i?"Height":"Width",n=(r["client"+p]-t)/2;return"fixed"!==e.css("position")&&(n=n+o.getScroll(window,i)-e.offsetParent().offset()[i]||0),n}var i=e("base/1.0.x/"),o=e("dom/1.0.x/dom-style"),r=e("widget/1.0.x/"),p=e("popuplayer/1.0.x/"),n=e("fixedlayer/1.0.x/"),a=e("draggable/1.0.x/");return r.create(function(e){var t=this,o=t._wrapper=e.wrapper;t._popupContent=o,delete t._popupTrigger,e.fixedLayer&&(t._fixedLayer=new n(i.mix({wrapper:o,disabled:!0},e.fixedLayer,{overwrite:!1}))),e.draggable&&(t._draggable=new a(i.mix({wrapper:o,disabled:!0},e.draggable,{overwrite:!1})),t._fixedLayer&&t._draggable.on("dragstart",function(){t._fixedLayer.destroy()}).on("dragend",function(){t._fixedLayer.reposition()}))},{_init:function(){p.prototype._init.apply(this,arguments),this._wrapper.find(".dialogbox-close").click(this.close)},_destroy:function(){p.prototype._init.apply(this,arguments),this._wrapper.find(".dialogbox-close").off("click",this.close)},_computeStyle:function(e){var i=this,o=/^center$/i;p.prototype._computeStyle.apply(i,arguments);var r=i._options[e],n=i["_"+e];(o.test(r.left)||o.test(r.right))&&(n.left=t(i._wrapper,n.width,"left")),(o.test(r.top)||o.test(r.bottom))&&(n.top=t(i._wrapper,n.height,"top"))},_actionDone:function(e){var t=this._fixedLayer,o=this._draggable;p.prototype._actionDone.apply(this,arguments),e?(t&&t.options({position:i.mix({},this._popupStyle,{whiteList:["top","bottom","left","right"]}),disabled:!1}),o&&o.init()):(o&&o.destroy(),t&&t.destroy())}},{popupWhen:"",closeWhen:"",popupStyle:{width:"",height:"",top:"center",left:"center",visibility:"visible"},closedStyle:{width:0,height:0,top:"center",left:"center",visibility:"hidden"},draggable:{},fixedLayer:{}},p)});